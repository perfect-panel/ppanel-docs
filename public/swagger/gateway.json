{
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "schemes": [
    "https"
  ],
  "swagger": "2.0",
  "info": {
    "title": "PPanel Gateway API",
    "version": "1.0.0"
  },
  "basePath": "/",
  "paths": {
    "/basic/check/version": {
      "get": {
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "Check if there is a new version of the service",
        "operationId": "basicCheckServiceVersion",
        "parameters": [
          {
            "type": "string",
            "description": "服务名称",
            "name": "service_name",
            "in": "query",
            "required": true
          },
          {
            "type": "string",
            "description": "通讯密钥",
            "name": "secret",
            "in": "query",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "description": "business code",
                  "type": "integer",
                  "example": 0
                },
                "data": {
                  "$ref": "#/definitions/ServiceVersionResponse"
                },
                "msg": {
                  "description": "business message",
                  "type": "string",
                  "example": "ok"
                }
              }
            }
          }
        }
      }
    },
    "/basic/heartbeat": {
      "get": {
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "Send heartbeat to the service",
        "operationId": "basicHeartbeat",
        "parameters": [
          {
            "type": "string",
            "description": "服务名称",
            "name": "service_name",
            "in": "query",
            "required": true
          },
          {
            "type": "string",
            "description": "通讯密钥",
            "name": "secret",
            "in": "query",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "description": "business code",
                  "type": "integer",
                  "example": 0
                },
                "data": {
                  "$ref": "#/definitions/HeartbeatResponse"
                },
                "msg": {
                  "description": "business message",
                  "type": "string",
                  "example": "ok"
                }
              }
            }
          }
        }
      }
    },
    "/basic/register": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "Register a new service to the gateway",
        "operationId": "basicRegisterService",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/RegisterServiceRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "description": "business code",
                  "type": "integer",
                  "example": 0
                },
                "data": {
                  "$ref": "#/definitions/RegisterServiceResponse"
                },
                "msg": {
                  "description": "business message",
                  "type": "string",
                  "example": "ok"
                }
              }
            }
          }
        }
      }
    },
    "/basic/update": {
      "post": {
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "schemes": [
          "https"
        ],
        "summary": "Update the service to the latest version",
        "operationId": "basicUpdateService",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UpdateServiceRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "description": "business code",
                  "type": "integer",
                  "example": 0
                },
                "data": {
                  "$ref": "#/definitions/UpdateServiceResponse"
                },
                "msg": {
                  "description": "business message",
                  "type": "string",
                  "example": "ok"
                }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "CheckServiceVersionRequest": {
      "type": "object"
    },
    "HeartbeatRequest": {
      "type": "object"
    },
    "HeartbeatResponse": {
      "type": "object",
      "required": [
        "success"
      ],
      "properties": {
        "success": {
          "description": "心跳是否成功",
          "type": "boolean"
        }
      }
    },
    "RegisterServiceRequest": {
      "type": "object",
      "required": [
        "secret",
        "proxy_path",
        "service_url",
        "repository",
        "service_name",
        "heartbeat_url",
        "service_version"
      ],
      "properties": {
        "heartbeat_url": {
          "description": "心跳地址",
          "type": "string"
        },
        "proxy_path": {
          "description": "代理路径",
          "type": "string"
        },
        "repository": {
          "description": "服务代码仓库",
          "type": "string"
        },
        "secret": {
          "description": "通讯密钥",
          "type": "string"
        },
        "service_name": {
          "description": "服务名称",
          "type": "string"
        },
        "service_url": {
          "description": "服务地址",
          "type": "string"
        },
        "service_version": {
          "description": "服务版本",
          "type": "string"
        }
      }
    },
    "RegisterServiceResponse": {
      "type": "object",
      "required": [
        "success",
        "message"
      ],
      "properties": {
        "message": {
          "description": "返回信息",
          "type": "string"
        },
        "success": {
          "description": "注册是否成功",
          "type": "boolean"
        }
      }
    },
    "ServiceVersionResponse": {
      "type": "object",
      "required": [
        "has_update",
        "current_version",
        "latest_version"
      ],
      "properties": {
        "current_version": {
          "description": "当前版本",
          "type": "string"
        },
        "has_update": {
          "description": "是否有更新",
          "type": "boolean"
        },
        "latest_version": {
          "description": "最新版本",
          "type": "string"
        }
      }
    },
    "UpdateServiceRequest": {
      "type": "object",
      "required": [
        "secret",
        "service_name"
      ],
      "properties": {
        "secret": {
          "description": "通讯密钥",
          "type": "string"
        },
        "service_name": {
          "description": "服务名称",
          "type": "string"
        }
      }
    },
    "UpdateServiceResponse": {
      "type": "object",
      "required": [
        "running",
        "error",
        "step",
        "total",
        "message"
      ],
      "properties": {
        "error": {
          "description": "是否更新出错",
          "type": "boolean"
        },
        "message": {
          "description": "返回信息",
          "type": "string"
        },
        "running": {
          "description": "是否正在更新",
          "type": "boolean"
        },
        "step": {
          "description": "更新步骤",
          "type": "integer"
        },
        "total": {
          "description": "更新总步骤",
          "type": "integer"
        }
      }
    }
  },
  "x-date": "2025-12-01 17:58:42",
  "x-description": "This is a goctl generated swagger file.",
  "x-github": "https://github.com/zeromicro/go-zero",
  "x-go-zero-doc": "https://go-zero.dev/",
  "x-goctl-version": "1.9.2"
}