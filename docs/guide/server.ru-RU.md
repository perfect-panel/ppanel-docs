---
title: Серверная часть
order: 2
nav:
  title: Руководство
  order: 1
group:
  title: Развертывание
  order: 1
toc: content
---

## Требования к среде выполнения

| Компонент       | Требования                              |
| -------------- | -------------------------------------- |
| Конфигурация сервера | Минимум: 1 ядро CPU, 2 ГБ ОЗУ; Рекомендуется: 2 ядра CPU, 4 ГБ ОЗУ |
| MySQL          | 5.7 и выше (рекомендуется MySQL 8)    |
| Redis          | 6 и выше                               |
| NGINX/Apache   | Любая версия                           |

## Установка Docker

Запустите следующую команду для быстрой установки Docker:

```sh
curl -fsSL https://get.docker.com | bash -s docker
```

## Быстрый старт

### Инициализация через веб-интерфейс

PPanel поддерживает инициализацию на основе веб-интерфейса, что упрощает процесс ручной настройки.

### Шаги инициализации

1. **Создайте необходимые конфигурационные файлы**: Сначала вручную создайте и настройте файл `/app/etc/ppanel.yaml` для последующей конфигурации.

2. **Запустите контейнер Docker**:

   ```sh
   docker run -d \
     --network host \
     --name ppanel-server \
     -v /app/etc/ppanel.yaml:/app/etc/ppanel.yaml \
     --restart=always \
     --log-opt max-size=10m \
     --log-opt max-file=3 \
     ppanel/ppanel-server:beta
   ```

3. **Перейдите на страницу инициализации**: В браузере перейдите по адресу `http://IP_сервера:8080/init`.

4. **Завершите настройку**: Следуйте инструкциям для настройки учетной записи администратора, конфигурации базы данных MySQL и сервера Redis.

5. **Нажмите кнопку инициализации**: После завершения настройки нажмите кнопку «Инициализация», приложение автоматически сохранит конфигурацию и перезапустится.

   > **Примечание**: PPanel по умолчанию использует порт **8080**, убедитесь, что этот порт доступен, при необходимости настройте параметры брандмауэра.

## Развертывание с использованием Docker

PPanel по умолчанию использует порт **8080**, убедитесь, что этот порт доступен, при необходимости настройте параметры брандмауэра.

Если вы не используете веб-инициализацию, вы можете войти с использованием учетной записи администратора по умолчанию:

- **Имя пользователя**: `admin@ppanel.dev`
- **Пароль**: `password`

> **Примечание**: После первого входа обязательно измените пароль по умолчанию для обеспечения безопасности.

### Создание необходимых конфигурационных файлов

Перед началом развертывания Docker сначала вручную создайте и настройте файл `/app/etc/ppanel.yaml`, чтобы обеспечить нормальную работу системы. Для примеров конфигурационных параметров смотрите раздел [Примеры конфигурации](#примеры-конфигурации) документации.

### Запуск контейнера Docker

Запустите следующую команду для запуска контейнера:

```sh
docker run -d \
  --network host \
  --name ppanel-server \
  -v /app/etc/ppanel.yaml:/app/etc/ppanel.yaml \
  --restart=always \
  --log-opt max-size=10m \
  --log-opt max-file=3 \
  ppanel/ppanel-server:beta
```

## Развертывание с использованием Docker Compose

PPanel по умолчанию использует порт **8080**, убедитесь, что этот порт доступен, при необходимости настройте параметры брандмауэра.

### Создание необходимых конфигурационных файлов

Перед началом развертывания Docker Compose сначала вручную создайте и настройте файл `/app/etc/ppanel.yaml`, чтобы обеспечить нормальную работу системы. Для примеров конфигурационных параметров смотрите раздел [Примеры конфигурации](#примеры-конфигурации) документации.

### Создание конфигурационного файла Docker Compose

Создайте файл `docker-compose.yml`:

```yaml
version: '3'

services:
  ppanel-server:
    image: ppanel/ppanel-server:beta
    container_name: ppanel-server
    network_mode: host
    volumes:
      - /app/etc/ppanel.yaml:/app/etc/ppanel.yaml
    restart: always
    logging:
      driver: 'json-file'
      options:
        max-size: '10m'
        max-file: '3'
```

### Запуск сервиса

Запустите следующую команду для запуска сервиса:

```sh
docker compose up -d
```

## Важные советы

- **Безопасность**: Обязательно измените пароль и ключи по умолчанию для обеспечения безопасности приложения.
- **Настройка портов**: Убедитесь, что необходимые порты открыты, чтобы избежать проблем с сетевым доступом.
- **Постоянство данных**: Рекомендуется монтировать тома данных при запуске контейнера для обеспечения постоянства данных.

## Примеры конфигурации

Вот пример конфигурации для `ppanel.yaml`:

```yaml
Host: 0.0.0.0 # IP для прослушивания
Port: 8080 # Порт для работы
Debug: true # Включить режим отладки
JwtAuth:
  AccessSecret: your-secret-key # Секретный ключ токена (пожалуйста, измените)
  AccessExpire: 604800 # Срок действия токена (в секундах)
Logger:
  FilePath: ./ppanel.log # Путь к файлу журнала
  MaxSize: 50
  MaxBackup: 3
  MaxAge: 30
  Compress: true
  LogType: json
  Level: info # Уровень журнала: info, debug, error
MySQL:
  Addr: 127.0.0.1:3306 # Адрес базы данных
  Dbname: vpnboard # Имя базы данных
  Username: root # Имя пользователя базы данных
  Password: your-password # Пароль базы данных (пожалуйста, измените)
  Config: charset=utf8mb4&parseTime=true&loc=Asia%2FShanghai
  MaxIdleConns: 10
  MaxOpenConns: 10
  LogMode: dev
  LogZap: false
  SlowThreshold: 1000
Redis:
  Host: 127.0.0.1:6379
  Pass: # Пароль Redis (если есть)
  DB: 0

Administer:
  Password: password # Пароль администратора (должен быть изменен)
  Email: admin@ppanel.dev # Адрес электронной почты администратора
```

> **Примечание**: После изменения конфигурационного файла перезапустите контейнер Docker, чтобы применить изменения.

## Получение поддержки

Если у вас возникли проблемы, обратитесь к официальной документации или свяжитесь с командой поддержки для получения помощи.

