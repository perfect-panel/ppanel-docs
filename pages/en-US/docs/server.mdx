
# Deployment Guide

## Server Environment Requirements

| Module          | Requirements                          |
| :-------------- | ------------------------------------- |
| Server Config   | Minimum: 1 CPU, 2 GB RAM  Recommended: 2 CPUs, 4 GB RAM |
| MySQL           | Version 5.7 and above (MySQL 8 recommended) |
| Redis           | Version 6 and above                   |
| NGINX / Apache  | Any version                           |

Docker installation guide: [Docker Practice Installation Guide](https://yeasy.gitbook.io/docker_practice/install)

### Download Server Files

```shell
cd /root
wget https://github.com/perfect-panel/ppanel-release/releases/download/0.1.0_alpha/ppanel.zip
unzip ppanel.zip
```

### Modify Configuration File

```shell
cd ppanel/app
vim ppanel.yaml
```

Configuration description:

```yaml
Host: 0.0.0.0 # Listening IP
Port: 8080 # Running port
Debug: true # Enable debug mode

Logger:
  File: ./ppanel.log # Log file path
  Level: debug # Log level: info, debug, error

JwtAuth:
  AccessSecret: 333ab3d5-429f-4a51-b001-ef484bf11db7 # Token secret (must be changed)
  AccessExpire: 604800 # Token expiration time (in seconds)

MySQL:
  Path: 127.0.0.1 # Database address
  Port: 3306
  Dbname: vpnboard # Database name
  Username: root # Replace with your username
  Password: Password # Replace with your root password
  MaxIdleConns: 10
  MaxOpenConns: 10
  LogMode: "dev"
  LogZap: false
  Config: charset=utf8mb4&parseTime=true&loc=Asia%2FShanghai

Redis:
  Host: 127.0.0.1:6379
  Type: server
  Pass: # Redis password (if any)
```

## Install Runtime Environment via Docker

Create a `docker-compose.yml` file:

```yaml
version: '3.8'

services:
  mysql:
    image: mysql:8.0.23
    container_name: mysql_db
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword  # Replace with your root password
      MYSQL_DATABASE: my_database        # Default database
      MYSQL_USER: user                   # Replace with your username
      MYSQL_PASSWORD: userpassword       # Replace with your user password
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql

  redis:
    image: redis:7
    container_name: redis_cache
    restart: always
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  nginx:
    image: uozi/nginx-ui:latest
    container_name: nginx_server
    restart: always
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - /root/ppanel/nginx:/etc/nginx
    depends_on:
      - mysql
      - redis

  ppanel:
    image: ppanel
    container_name: ppanel
    restart: always
    command: ["./ppanel", "run", "--config", "./ppanel.yaml"]
    volumes:
      - ./root/ppanel/app:/app
    depends_on:
      - mysql
      - redis

volumes:
  mysql_data:
  redis_data:
```

### Run the Application

```shell
# Create the docker-compose.yml file and paste the content above
vim docker-compose.yml
# Save and exit (:wq!)
docker-compose up -d # Run Docker containers
```

At this point, the PPanel server has been successfully deployed and is running.
