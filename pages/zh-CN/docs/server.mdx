# 部署指南

## 服务端运行环境要求

| 模块          | 要求                       |
| --------------- | --------------------------- |
| 服务器配置   | 最低：1U 2G  推荐：2U 4G       |
| MySQL           | 版本 5.7 及以上（推荐使用 MySQL 8） |
| Redis           | 版本 6 及以上          |
| NGINX / Apache  | 任意版本                 |

## 修改配置文件

进入配置文件目录并编辑配置：

```shell
cd ppanel/app
vim ppanel.yaml
```

配置项说明：

```yaml
Host: 0.0.0.0 # 监听 IP
Port: 8080 # 运行端口
Debug: true # 是否开启调试模式

Logger:
  File: ./ppanel.log # 日志文件路径
  Level: debug # 日志级别：info, debug, error

JwtAuth:
  AccessSecret: 333ab3d5-429f-4a51-b001-ef484bf11db7 # Token 密钥（务必修改）
  AccessExpire: 604800 # Token 有效期（秒）

MySQL:
  Path: 127.0.0.1 # 数据库地址
  Port: 3306
  Dbname: vpnboard # 数据库名称
  Username: root # 数据库用户名
  Password: Password # 数据库密码（务必修改）
  MaxIdleConns: 10
  MaxOpenConns: 10
  LogMode: "dev"
  LogZap: false
  Config: charset=utf8mb4&parseTime=true&loc=Asia%2FShanghai

Redis:
  Host: 127.0.0.1:6379
  Type: server
  Pass: # Redis 密码（如果有）
```

## 安装 Docker

运行以下命令安装 Docker：

```sh
curl -fsSL https://get.docker.com | bash -s docker
```

## 使用 Docker 部署

应用程序包含一个用于初始设置的默认管理员账户：

- **用户名**：`admin@ppanel.dev`
- **密码**：`admin-password`

> **注意**：首次登录后请更改默认密码以确保安全。

### 运行 Docker 容器

1. **使用最新版本**：

   ```sh
   docker run -d -p 8080:8080 \
     --name ppanel-server \
     -v $(pwd)/ppanel.yaml:/app/etc/ppanel.yaml \
     ppanel/ppanel-server:latest
   ```

2. **使用 Beta 版本**：

   ```sh
   docker run -d -p 8080:8080 \
     --name ppanel-server-beta \
     -v $(pwd)/ppanel.yaml:/app/etc/ppanel.yaml \
     ppanel/ppanel-server:beta
   ```

### 使用 Docker Compose 部署

3. **使用 Docker Compose（最新版本）**：
   创建一个 `docker compose.yml` 文件并进行如下配置：

   ```yaml
   version: '3'

   services:
     ppanel-server:
       image: ppanel/ppanel-server:latest
       container_name: ppanel-server
       ports:
         - '8080:8080'
       volumes:
         - ./ppanel.yaml:/app/etc/ppanel.yaml
       restart: always
   ```

   启动服务：

   ```sh
   docker compose up -d
   ```

4. **使用 Docker Compose（Beta 版本）**：
   创建一个 `docker compose-beta.yml` 文件并进行如下配置：

   ```yaml
   version: '3'

   services:
     ppanel-server-beta:
       image: ppanel/ppanel-server:beta
       container_name: ppanel-server-beta
       ports:
         - '8081:8080'
       volumes:
         - ./ppanel.yaml:/app/etc/ppanel.yaml
       restart: always
   ```

   启动 Beta 服务：

   ```sh
   docker compose -f docker compose-beta.yml up -d
   ```